import"./Dialog.astro_astro_type_script_index_0_lang.e82de0d4.js";import{c as $,a as A,f as d}from"./couponRepository.c117bcb0.js";import{u as O}from"./hoisted.63d8ef3d.js";import{a as y,h as n}from"./permalinks.82ad627a.js";import{c as _}from"./hoisted.0092494d.js";import"https://unpkg.com/lite-vimeo-embed";import"./Partners.astro_astro_type_script_index_0_lang.4ab8f1e4.js";import{E as k}from"./embla-carousel-autoplay.esm.8d54907d.js";import"./LeadForm.astro_astro_type_script_index_0_lang.3974798c.js";import"./BottomSheet.astro_astro_type_script_index_0_lang.06df2686.js";import"./_commonjsHelpers.725317a4.js";import"./leadRepository.aaa44935.js";const x=(e,t)=>e?.replace(/original/gi,t),f=document.getElementById(y),h=document.querySelector(".courses-list"),D=document.querySelector(".courses-card"),m=f?.querySelector(".more-btn"),b=JSON.parse(f?.dataset.categories||"[]"),q=JSON.parse(f?.dataset.itemsToShow||"0"),v=f?.dataset.bottomSheetId||"";let r=b[0],u;f||_.setKey("hasCourses",!1);m?.addEventListener("click",R);const V=document.querySelector(".bottom-sheet-title"),T=document.querySelector(".bottom-sheet-body"),E=window.matchMedia("(max-width: 1023px)");let L=E.matches;E.addEventListener("change",e=>{L=e.matches,S(!1),p(),F()});function F(){window[v].close()}function S(e){m&&(e?m.innerText="Kamroq ko'rsatish":m.innerText="Barchasini ko'rsatish")}function C(){w(r.courses),S(!0),r.expanded=!0}function p(){w(r.courses.slice(0,q)),S(!1),r.expanded=!1}function R(){if(L){V.innerText=r.title,T.innerHTML="";let e=r.courses;u&&(e=M(e,u)),e.forEach(t=>{T.appendChild(K(t))}),window[v].showModal();return}r.expanded?p():C()}function G(e){const t=D.cloneNode(!0),o=t.querySelector(".card-image"),i=t.querySelector(".mobile-image"),g=t.querySelector(".tablet-image"),s=t.querySelector(".course-slug"),a=t.querySelector(".card-title"),c=t.querySelector(".card-price"),l=t.querySelector(".old-price"),H=t.querySelector(".card-description"),N=t.querySelector(".card-user-count");return s.href=`/${y}/${e.slug}`,o.src=e.cardImage,i.srcset=x(e.cardImage,"small"),g.srcset=x(e.cardImage,"medium"),o.alt=e.name,a.textContent=e.name,H.innerHTML=e.description,N.textContent=`${e.learners} o'quvchi`,e.discountPrice?(l.textContent=`${d(e.prices.oneTime)} so'm`,c.textContent=`${d(e.discountPrice)} so'm`):c.textContent=e.prices.oneTime?`${d(e.prices.oneTime)} so'm`:"Bepul",t}const w=async e=>{const t=document.createDocumentFragment();try{u&&(e=M(e,u)),h.innerHTML="",e.forEach(o=>{h.appendChild(G(o))}),h.appendChild(t)}catch(o){console.log(o)}},P=document.querySelectorAll(".category-label"),J=()=>{P.forEach(e=>{e.classList.remove("text-primary","border-primary"),e.classList.add("border-transparent")})};O.subscribe(async e=>{e&&b.length>0&&(u=await $.getGlobalCoupon(),r.expanded?C():p())});P.forEach(e=>{const t=e.querySelector(".category-tab");t.addEventListener("change",()=>{J(),e.classList.add("text-primary","border-primary"),e.classList.remove("text-gray-600","border-transparent");const o=b.find(i=>i._id===t.value);r=o,o&&o?.itemsCount>q?(m?.classList.remove("hidden"),o.expanded?C():p()):(m?.classList.add("hidden"),p())})});function M(e,t){return e.map(o=>({...o,discountPrice:u&&o.prices.oneTime>0?A(o.prices.oneTime,t):void 0}))}function K(e){const t=n("figure",{class:"rounded-t-xl h-28 sm:h-36 md:h-40 aspect-[16/9]"},n("img",{class:"rounded-t-xl w-full h-full object-cover",alt:e.name,src:x(e.cardImage,"medium")})),o=n("div",{class:"text-sm text-gray-400 flex items-center space-x-1"},`<img src="/images/user.svg"/><p class="text-gray-500 card-user-count">${e.learners} o'quvchi</p>`),i=n("h4",{class:"font-medium text-gray-800 text-sm line-clamp-3"},e.name),g=n("div",{class:"flex-1"}),s=n("p",{class:"text-primary font-semibold text-base"}),a=n("p",{class:"text-sm text-gray-200 line-through"});e.discountPrice?(a.textContent=`${d(e.prices.oneTime)} so'm`,s.textContent=`${d(e.discountPrice)} so'm`):s.textContent=e.prices.oneTime?`${d(e.prices.oneTime)} so'm`:"Bepul";const c=n("div",{class:"mt-1 space-y-0.5"},[s,a]),l=n("div",{class:"p-3 border border-gray-100 rounded-b-xl flex flex-col flex-grow"},[o,i,g,c]);return n("a",{class:"h-full rounded-xl transition flex flex-col",href:`/${y}/${e.slug}`},[t,l])}j();function j(){const e=document.querySelector("#specialists"),t=e.querySelector("#specialists-carousel"),o=e.querySelector('[aria-label="previous"]'),i=e.querySelector('[aria-label="next"]'),s=k(t,{loop:!0,align:"center",draggable:!0,breakpoints:{"(min-width: 640px)":{loop:!1,align:"start",draggable:!1}}});function a(){const c=s.slidesNotInView(),l=s.slidesInView();l[l.length-1]<c[c.length-1]&&s.scrollNext()}o.addEventListener("click",s.scrollPrev,!1),i.addEventListener("click",a,!1)}const U=48,I=document.querySelectorAll("[data-accordion]");function W(e,t){e.style.maxHeight=null,t.dataset.open="false",e.dataset.open="false",e.ariaHidden="true"}function B(e,t){e.style.maxHeight=e.scrollHeight+U+"px",t.dataset.open="true",e.dataset.open="true",e.ariaHidden="false"}function X(){const e=I[0],t=e.nextElementSibling;B(t,e)}function z(){this.classList.toggle("active");let e=this.nextElementSibling;e.style.maxHeight?W(e,this):B(e,this)}function Q(){X(),I.forEach(e=>{e.addEventListener("click",z)})}Q();